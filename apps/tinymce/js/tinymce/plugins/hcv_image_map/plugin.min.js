tinymce.PluginManager.add('hcv_image_map', function(editor, url) {
    // Add a button that opens a window
    var hcv = 10;
    editor.addButton('hcv_image_map', {
        text: 'Chèn mặt bằng',
        icon: 'image',
        onclick: function() {
            // Open window
            editor.windowManager.open({
                width: screen.width-100,
                height: screen.height-440,
                resizable: true,
                id: 'hcv-upload',
                url: site_url + '/admin/?page_type=image-map',
                title: 'Chèn mặt bằng',
                

                buttons: [{
					text: 'Chọn',
					onclick: 'submit'
				},
                {
                    text: 'Hủy',
					onclick: 'close'
				}
                ],
                
                
                onsubmit: function(e) {
                    
                     
                    $("#hcv-upload iframe").contents().find("#wrap-svg-map-1").each(function(){
                        
                        var add = "<p></p>";
                        add = add + "<div class='wrap-svg-map' style='margin:5px;padding:5px;background:#c2f5ee'>";
                        add = add + add + $(this).html();
                        add = add + "&nbsp;</div>";
                        add = add + "<p></p>";
                        
                         
                        editor.insertContent( add );
                         
                        
                    });
                    
					$(".opacity2").remove();
                    
                },
                onclose: function(e) { 
                    $(".opacity2").remove();                    
                }
            });
        
            var opacity2 = '<div class="opacity2"></div>';
            $("body").append(opacity2);
        }
    });

    // Adds a menu item to the tools menu
    editor.addMenuItem('example', {
        text: 'Example plugin',
        context: 'tools',
        onclick: function() {
            // Open window with a specific url
            editor.windowManager.open({
                title: 'TinyMCE site',
                url: 'http://www.tinymce.com',
                width: 800,
                height: 600,
                buttons: [{
                    text: 'Đóng',
                    onclick: 'close'
                }]
            });
        }
    });
});